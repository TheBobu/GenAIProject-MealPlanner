research_recipes_task:
  description: >
    Analyze the user's request: {user_request}. 
    Search the recipe database to find 3 existing meals 
    that align with the user's dietary preferences and time constraints (user profile: {user_profile}). 
  expected_output: >
    A detailed text summary of 3 suitable recipes, including their titles and full ingredient lists formatted as text. Exclude the preparation steps.
  agent: recipe_researcher

calculate_macros_task:
  description: >
    Take the recipes from the 'research_recipes_task'. Use the macronutrient tool fetch_ingredient_macros to 
    calculate the total calories, protein, carbohydrates, and fats for each meal. If this tool cannot find macronutrients 
    use the online macro tool.
  expected_output: >
    A detailed text-based nutritional breakdown for every recipe provided, formatted clearly 
    per serving with calories, protein, carbs, and fats.
  agent: nutritionist
  context:
    - research_recipes_task

price_ingredients_task:
  description: >
    Identify all unique ingredients required for the selected meals. Search for current market prices in Europe to estimate the 
    cost of each meal and the total grocery bill for the entire plan.
  expected_output: >
    A detailed text-based itemized price list for all ingredients with a total cost estimate 
    for the proposed meal plan, formatted as readable text.
  agent: cost_estimator
  context:
    - research_recipes_task

summarize_plan_task:
  description: >
    Synthesize all information gathered (recipes, nutrition, and costs). 
    Review this against the user's personal profile: {user_profile} and the user request: {user_request}. 
    If the user specifies its age, weight and height, calculate the body composition and energy needs 
    (BMI and maintenance calories as well as calories needed to increase or decrease weight) using the health calculator tool.
    Create a finalized summary and retrieve the recipe cooking steps using the recipe tool.
    Format your response EXACTLY as follows:
      1. Start with body composition (if available): BMI, maintenance calories, weight loss/gain targets
      2. Then list the meal menu with brief overview
      3. For each meal, provide: name, ingredients, calories, macros, and price
      4. End with total shopping cost and summary
    IMPORTANT: Return ONLY the final meal plan as readable text. Do not include your reasoning or thought process.
  expected_output: >
    A comprehensive, well-formatted meal plan summary including:
    - User's body composition data (if available)
    - Complete meal menu overview
    - Detailed breakdown per meal with nutritional info and pricing
    - Total budget and shopping list
    Return only the final formatted output, no internal reasoning.
  agent: plan_summarizer
  context:
    - research_recipes_task
    - calculate_macros_task
    - price_ingredients_task

# invent_meal_task:
#   description: >
#     Review the ingredients and flavor profiles present in the recipe database. 
#     Using your culinary expertise, invent 2 completely new, original recipes 
#     that would appeal to someone with these preferences: {user_profile}. 
#     Ensure the recipes are creative but use realistic ingredient combinations.
#   expected_output: >
#     Two original recipe creations with a title, a brief "chef's note" on the 
#     flavor profile, and a detailed list of ingredients.
#   agent: creative_chef
